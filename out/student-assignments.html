<!DOCTYPE html>
<html>
  <head>
    <title>Art, Science, and Technology</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="http://fonts.googleapis.com/css?family=Abel|Codystar" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="./styles/main.css">
  </head>
</html>
<body>
  <section class="main">
    <section class="content">
<table>
  <thead>
    <tr>
      <th>first name</th>
      <th>last name</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
      <th>7</th>
      <th>8</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>
<script src="./vendor/jquery/jquery.js"></script>
<script src="./vendor/handlebars/handlebars.js"></script>
<script src="./vendor/d3/d3.js"></script>
<script>
  // var
  //   return Math.random()<.5;
  // }
  
  $(document).ready(function(){
    var students = [];
    
  //   d3.csv('./students.csv', function(d){
  //     students = d.map(function(student){
  //       var assignments = [];
  
  //       for (var i = 0; i < 8; i++) {
  //         assignments[i] = "";
  //       }
  
  //       return {
  //         firstName: student['First Name'],
  //         lastName: student['Last Name'],
  //         studentId: student['Student ID'],
  //         assignments: assignments
  //       };
  //     })
  
  //     var studentsJSON = JSON.stringify(students);
  //     localStorage.setItem('students', studentsJSON);
  //     draw();
  //   });
    d3.json("https://ast2014.firebaseio.com/students.json", function(d){
      students = d.filter(function(student) {
        return student;
      });
      draw();
    });
    
    var rawHTML = "<td>{{firstName}}</td><td>{{lastName}}</td>{{#each assignments}}<td>{{#if this}}<a href='{{this}}'>X</a>{{else}}_{{/if}}</td>{{/each}}</td>";
    var template = Handlebars.compile(rawHTML);
    
    function draw() {
      d3.select('tbody')
        .selectAll('tr')
        .data(students)
        .enter()
        .append('tr')
        .html(function(d){
          return template(d);
        })
    };
  });
</script>
    </section>
  </section>
</body>