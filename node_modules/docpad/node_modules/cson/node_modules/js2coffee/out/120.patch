From 925238afacc045755333eebf3606ffc863e6d8f8 Mon Sep 17 00:00:00 2001
From: Ryunosuke SATO <tricknotes.rs@gmail.com>
Date: Sat, 7 Jan 2012 15:10:45 +0900
Subject: [PATCH] Support empty for loops. Closes #116.

---
 lib/js2coffee.coffee        | 5 ++++-
 test/features/for_in.coffee | 2 ++
 test/features/for_in.js     | 3 ++-
 3 files changed, 8 insertions(+), 2 deletions(-)

diff --git a/lib/js2coffee.coffee b/lib/js2coffee.coffee
index 33aa5fc..2ce1533 100644
--- a/lib/js2coffee.coffee
+++ b/lib/js2coffee.coffee
@@ -454,7 +454,10 @@ class Builder
     c = new Code
 
     c.add "for #{@build n.iterator} of #{@build n.object}"
-    c.scope @body(n.body)
+    if n.body.children.length > 0
+      c.scope @body(n.body)
+    else
+      c.scope "continue"
     c
 
   'while': (n) ->
diff --git a/test/features/for_in.coffee b/test/features/for_in.coffee
index 6affa39..b5172f1 100644
--- a/test/features/for_in.coffee
+++ b/test/features/for_in.coffee
@@ -1,2 +1,4 @@
 for x of y
   alert 1
+for key of obj
+  continue
diff --git a/test/features/for_in.js b/test/features/for_in.js
index 2bbb517..8d746e4 100644
--- a/test/features/for_in.js
+++ b/test/features/for_in.js
@@ -1 +1,2 @@
-for (x in y) { alert(1) }
\ No newline at end of file
+for (x in y) { alert(1) }
+for (key in obj) {}
-- 
1.8.5.1

